{% extends 'Funcoes.html' %}

{% block pagina %}
{% load bootstrap %}

<script type="text/javascript">

function abrirModal() {
	$("#myModal").find('form')[0].reset();
	$('#myModal').modal('show');
}

function fecharModal(){
	$("#myModal").modal('hide');
  $("#myModal").find('form')[0].reset();
}

</script>

<button class="btn btn-success btn-lg" onclick="abrirModal()" 
	style="margin-top:10px;" ><span class="glyphicon glyphicon-plus"> Pergunta</button>

	<div class="modal fade" id="myModal" >
    <div class="modal-dialog modal-lg">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" onclick="fecharModal()">&times;</button>
          <h4 class="modal-title">Cadastrar nova pergunta</h4>
        </div>
        <form class="form-horizontal" method="POST" 
          action="/SalvarPergunta/{{id}}" data-toggle='validator' role='form'>
        <div class="modal-body">
          {% csrf_token %}
          {{form|bootstrap_horizontal}}
        </div>
        <div class="modal-footer">
        	<button type="submit" class="btn btn-success" onclick="javascript:window.history.go(-1)">Salvar</button>
        	<button type="button" onclick="fecharModal()" class="btn btn-danger">Cancelar</button>
        </div>
        </form>
      </div>
      
    </div>
    </div>

<!-- Mostrar as perguntas -->
{% if perguntas %}
<table class="table table-bordered" style="margin-top:20px">
    <thead>
      <tr>

        <th>Perguntas</th>
        <th>Ações</th>

      </tr>
    </thead>
    <tbody>
      {% for p in perguntas%}
      <tr>
        <td>{{p.pergunta}}</td>
        <td class="col-md-2"><a href="" class="btn btn-success"> Editar </a>
        <a href="/RemoverPergunta/{{id}}/pergunta/{{p.id}}" 
        class="btn btn-danger">Apagar</a></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
<h2>Nenhuma pergunta cadastrada</h2>
{% endif %}
{% endblock %}